- <dialog> 标签是一个用于创建**对话框（dialog）**的原生元素，通常用于显示模态窗口（modal）或非模态窗口（non-modal），例如弹出提示、确认框、表单窗口等。它是 HTML5 引入的一个较新的元素，提供了原生的对话框功能，无需依赖额外的 JavaScript 库（如 jQuery）或复杂的 CSS。
- 在这个项目中，你将通过构建一个 Todo 应用来学习 JavaScript 中的 localStorage 如何工作。localStorage 是 JavaScript 的一种 Web 存储功能，允许你通过将数据以键值对（key:value pair）的形式存储来持久化数据。
- findIndex()的用法
- unshift()的用法
- splice()的用法
- buttonEl.parentElement.remove()：
  找到 buttonEl 的父元素（parentElement）。
  调用父元素的 remove() 方法，将父元素及其所有子元素（包括 buttonEl 本身）从 DOM 树中删除。

# 任务管理器应用代码总结

## 功能概述

这段代码实现了一个简单的任务管理器应用，允许用户添加、编辑和删除任务。任务数据会保存在浏览器的本地存储中，页面刷新后依然保留。

## 关键组件

### DOM 元素获取

代码开始获取了所有需要操作的 HTML 元素，包括表单、按钮、对话框和输入框等。

### 数据管理

- `taskData` 数组从本地存储加载任务数据，如果没有则使用空数组
- `currentTask` 对象用于追踪当前正在编辑的任务

### 核心功能

#### 1. 添加/更新任务

```javascript
const addOrUpdateTask = () => {
  // 验证标题不为空
  // 创建任务对象
  // 添加到数组或更新现有任务
  // 保存到本地存储
  // 更新UI
  // 重置表单
};
```

- 检查标题是否为空
- 创建包含 id、标题、日期和描述的任务对象
- 根据是新任务还是编辑现有任务决定添加或更新
- 将数据保存到本地存储
- 调用函数更新 UI 显示
- 重置表单状态

#### 2. 更新任务容器

```javascript
const updateTaskContainer = () => {
  // 清空容器
  // 遍历任务数据，为每个任务创建HTML
  // 添加到容器中
};
```

- 清空任务容器的内容
- 遍历任务数据，为每个任务生成 HTML 元素
- 包含编辑和删除按钮

#### 3. 删除任务

```javascript
const deleteTask = (buttonEl) => {
  // 找到要删除的任务索引
  // 从DOM中移除
  // 从数组中删除
  // 更新本地存储
};
```

- 通过按钮的父元素 id 找到要删除的任务
- 从 DOM 和数据数组中移除
- 更新本地存储

#### 4. 编辑任务

```javascript
const editTask = (buttonEl) => {
  // 找到要编辑的任务
  // 填充表单
  // 修改按钮文本
  // 显示表单
};
```

- 找到要编辑的任务数据
- 将值填充到表单输入框
- 将按钮文本从"Add Task"更改为"Update Task"
- 显示任务表单

#### 5. 重置表单

```javascript
const reset = () => {
  // 重置按钮文本
  // 清空输入框
  // 隐藏表单
  // 清空当前任务对象
};
```

- 重置按钮文本为"Add Task"
- 清空所有输入框
- 切换表单的可见性
- 重置当前任务对象

### 辅助功能

#### 移除特殊字符

```javascript
const removeSpecialChars = (val) => {
  return val.trim().replace(/[^A-Za-z0-9\-\s]/g, "");
};
```

- 去除字符串首尾空格
- 使用正则表达式移除特殊字符，只保留字母、数字、连字符和空格

### 事件监听器

1. **打开表单按钮**：切换表单的显示状态
2. **关闭表单按钮**：
   - 检查表单是否有内容且内容已被修改
   - 如果是，显示确认对话框
   - 否则直接重置表单
3. **取消按钮**：关闭确认对话框
4. **放弃按钮**：关闭对话框并重置表单
5. **表单提交**：防止默认提交行为，调用添加或更新任务的函数

## 初始化逻辑

如果本地存储中有任务数据，程序会在加载时调用`updateTaskContainer()`来显示现有任务。

## 技术亮点

1. **本地存储**：使用`localStorage`持久化保存任务数据
2. **模态对话框**：使用 HTML 对话框元素提示用户确认操作
3. **动态 DOM 操作**：通过 JavaScript 动态生成和修改页面内容
4. **事件委托**：在任务容器中通过 onclick 属性处理编辑和删除事件
5. **表单验证**：确保任务标题不为空
6. **用户体验**：防止意外丢失未保存的更改
